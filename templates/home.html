<!DOCTYPE htm l>
<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
</head>

<body>
  <div class="container">
    <h2 class="form-signin-heading">Resumebot:-)</h2>


    <br />
    <div>
      <ul class="list-group" id="chatWindow" style="overflow:auto;height:70%">

      </ul>
    </div>
    <br/>
    <div class="col-xs-2">
    </div>
    <div class="col-xs-6">
      <input class="form-control" id="userMessage" type="text" placeholder="Type here . . .">
      <input hidden id="prevContext">
      <input hidden id="sessionId">
    </div>

  </div>


  <script>
    $(document).ready(function() {
      $('#userMessage').focus()
      $('#userMessage').keypress(function(e) {
        if (e.key === 'Enter') {
          var userMessage = $('#userMessage').val();
          $('#userMessage').val('');

          $("#chatWindow").append("<li align= 'right' class='list-group-item list-group-item-secondary'>" + userMessage + "</li>");
          $.ajax({
            url: '/getResponse',
            data: {
              'userMessage': userMessage,
              'previousContext': $('#prevContext').val(),
              'sessionId':$('#sessionId').val()
            },
            type: 'GET',
            success: function(response) {
                console.log(response);
                $("#chatWindow").append("<li align= 'left' class='list-group-item list-group-item-primary'>" + response["result"][0] + "</li>");
                $('#prevContext').val(response["result"][1]);
                $('#sessionId').val(response["result"][2]);
                var element = document.getElementById("chatWindow");
                element.scrollTop = element.scrollHeight;
            }
          });
        }
      });
    });
  </script>
</body>

</html>
